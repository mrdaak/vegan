!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("stream")):"function"==typeof define&&define.amd?define(["stream"],t):t((e=e||self).stream$1)}(this,(function(stream$1){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vnode(e,t,r,n,i,a){return{tag:e,key:t,attrs:r,children:n,text:i,dom:a,domSize:void 0,state:void 0,events:void 0,instance:void 0}}stream$1=stream$1&&Object.prototype.hasOwnProperty.call(stream$1,"default")?stream$1.default:stream$1,Vnode.normalize=function(e){return Array.isArray(e)?Vnode("[",void 0,void 0,Vnode.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:Vnode("#",void 0,void 0,String(e),void 0,void 0)},Vnode.normalizeChildren=function(e){var t=[];if(e.length){for(var r=null!=e[0]&&null!=e[0].key,n=1;n<e.length;n++)if((null!=e[n]&&null!=e[n].key)!==r)throw new TypeError("Vnodes must either always have keys or never have keys!");for(n=0;n<e.length;n++)t[n]=Vnode.normalize(e[n])}return t};var vnode=Vnode,hyperscriptVnode=function(){var e,t=arguments[this],r=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},r=this),arguments.length===r+1)e=arguments[r],Array.isArray(e)||(e=[e]);else for(e=[];r<arguments.length;)e.push(arguments[r++]);return vnode("",t.key,t,e)},selectorParser=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,selectorCache={},hasOwn={}.hasOwnProperty;function isEmpty(e){for(var t in e)if(hasOwn.call(e,t))return!1;return!0}function compileSelector(e){for(var t,r="div",n=[],i={};t=selectorParser.exec(e);){var a=t[1],o=t[2];if(""===a&&""!==o)r=o;else if("#"===a)i.id=o;else if("."===a)n.push(o);else if("["===t[3][0]){var s=t[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?n.push(s):i[t[4]]=""===s?s:s||!0}}return n.length>0&&(i.className=n.join(" ")),selectorCache[e]={tag:r,attrs:i}}function execSelector(e,t){var r=t.attrs,n=vnode.normalizeChildren(t.children),i=hasOwn.call(r,"class"),a=i?r.class:r.className;if(t.tag=e.tag,t.attrs=null,t.children=void 0,!isEmpty(e.attrs)&&!isEmpty(r)){var o={};for(var s in r)hasOwn.call(r,s)&&(o[s]=r[s]);r=o}for(var s in e.attrs)hasOwn.call(e.attrs,s)&&"className"!==s&&!hasOwn.call(r,s)&&(r[s]=e.attrs[s]);for(var s in null==a&&null==e.attrs.className||(r.className=null!=a?null!=e.attrs.className?String(e.attrs.className)+" "+String(a):a:null!=e.attrs.className?e.attrs.className:null),i&&(r.class=null),r)if(hasOwn.call(r,s)&&"key"!==s){t.attrs=r;break}return Array.isArray(n)&&1===n.length&&null!=n[0]&&"#"===n[0].tag?t.text=n[0].children:t.children=n,t}function hyperscript(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=hyperscriptVnode.apply(1,arguments);return"string"==typeof e&&(t.children=vnode.normalizeChildren(t.children),"["!==e)?execSelector(selectorCache[e]||compileSelector(e),t):(t.tag=e,t)}var hyperscript_1=hyperscript,trust=function(e){return null==e&&(e=""),vnode("<",void 0,void 0,e,void 0,void 0)},fragment=function(){var e=hyperscriptVnode.apply(0,arguments);return e.tag="[",e.children=vnode.normalizeChildren(e.children),e};hyperscript_1.trust=trust,hyperscript_1.fragment=fragment;var hyperscript_1$1=hyperscript_1,commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var PromisePolyfill=function(e){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var t=this,r=[],n=[],i=l(r,!0),a=l(n,!1),o=t._instance={resolvers:r,rejectors:n},s="function"==typeof setImmediate?setImmediate:setTimeout;function l(e,i){return function l(c){var h;try{if(!i||null==c||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof(h=c.then))s((function(){i||0!==e.length||console.error("Possible unhandled promise rejection:",c);for(var t=0;t<e.length;t++)e[t](c);r.length=0,n.length=0,o.state=i,o.retry=function(){l(c)}}));else{if(c===t)throw new TypeError("Promise can't be resolved w/ itself");u(h.bind(c))}}catch(e){a(e)}}}function u(e){var t=0;function r(e){return function(r){t++>0||e(r)}}var n=r(a);try{e(r(i),n)}catch(e){n(e)}}u(e)};PromisePolyfill.prototype.then=function(e,t){var r,n,i=this._instance;function a(e,t,a,o){t.push((function(t){if("function"!=typeof e)a(t);else try{r(e(t))}catch(e){n&&n(e)}})),"function"==typeof i.retry&&o===i.state&&i.retry()}var o=new PromisePolyfill((function(e,t){r=e,n=t}));return a(e,i.resolvers,r,!0),a(t,i.rejectors,n,!1),o},PromisePolyfill.prototype.catch=function(e){return this.then(null,e)},PromisePolyfill.prototype.finally=function(e){return this.then((function(t){return PromisePolyfill.resolve(e()).then((function(){return t}))}),(function(t){return PromisePolyfill.resolve(e()).then((function(){return PromisePolyfill.reject(t)}))}))},PromisePolyfill.resolve=function(e){return e instanceof PromisePolyfill?e:new PromisePolyfill((function(t){t(e)}))},PromisePolyfill.reject=function(e){return new PromisePolyfill((function(t,r){r(e)}))},PromisePolyfill.all=function(e){return new PromisePolyfill((function(t,r){var n=e.length,i=0,a=[];if(0===e.length)t([]);else for(var o=0;o<e.length;o++)!function(o){function s(e){i++,a[o]=e,i===n&&t(a)}null==e[o]||"object"!=typeof e[o]&&"function"!=typeof e[o]||"function"!=typeof e[o].then?s(e[o]):e[o].then(s,r)}(o)}))},PromisePolyfill.race=function(e){return new PromisePolyfill((function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)}))};var polyfill=PromisePolyfill,promise=createCommonjsModule((function(e){"undefined"!=typeof window?(void 0===window.Promise?window.Promise=polyfill:window.Promise.prototype.finally||(window.Promise.prototype.finally=polyfill.prototype.finally),e.exports=window.Promise):void 0!==commonjsGlobal?(void 0===commonjsGlobal.Promise?commonjsGlobal.Promise=polyfill:commonjsGlobal.Promise.prototype.finally||(commonjsGlobal.Promise.prototype.finally=polyfill.prototype.finally),e.exports=commonjsGlobal.Promise):e.exports=polyfill})),render=function(e){var t,r=e&&e.document,n={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||n[e.tag]}function a(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function o(e){var t=e.state;try{return this.apply(t,arguments)}finally{a(e,t)}}function s(){try{return r.activeElement}catch(e){return null}}function l(e,t,r,n,i,a,o){for(var s=r;s<n;s++){var l=t[s];null!=l&&u(e,l,i,o,a)}}function u(e,t,n,i,a){var o=t.tag;if("string"==typeof o)switch(t.state={},null!=t.attrs&&$(t.attrs,t,n),o){case"#":!function(e,t,n){t.dom=r.createTextNode(t.children),C(e,t.dom,n)}(e,t,a);break;case"<":h(e,t,i,a);break;case"[":!function(e,t,n,i,a){var o=r.createDocumentFragment();if(null!=t.children){var s=t.children;l(o,s,0,s.length,n,null,i)}t.dom=o.firstChild,t.domSize=o.childNodes.length,C(e,o,a)}(e,t,n,i,a);break;default:d(e,t,n,i,a)}else!function(e,t,r,n,i){f(t,r),null!=t.instance?(u(e,t.instance,r,n,i),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,n,i,a)}var c={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function h(e,t,n,i){var a=t.children.match(/^\s*?<(\w+)/im)||[],o=r.createElement(c[a[1]]||"div");"http://www.w3.org/2000/svg"===n?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",o=o.firstChild):o.innerHTML=t.children,t.dom=o.firstChild,t.domSize=o.childNodes.length,t.instance=[];for(var s,l=r.createDocumentFragment();s=o.firstChild;)t.instance.push(s),l.appendChild(s);C(e,l,i)}function d(e,t,n,a,o){var s=t.tag,u=t.attrs,c=u&&u.is,h=(a=i(t)||a)?c?r.createElementNS(a,s,{is:c}):r.createElementNS(a,s):c?r.createElement(s,{is:c}):r.createElement(s);if(t.dom=h,null!=u&&function(e,t,r){for(var n in t)I(e,n,null,t[n],r)}(t,u,a),C(e,h,o),!_(t)&&(null!=t.text&&(""!==t.text?h.textContent=t.text:t.children=[vnode("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children)){var d=t.children;l(h,d,0,d.length,n,null,a),"select"===t.tag&&null!=u&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var r=""+t.value;e.dom.value===r&&-1!==e.dom.selectedIndex||(e.dom.value=r)}"selectedIndex"in t&&I(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,u)}}function f(e,t){var r;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(r=e.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(r=e.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if($(e.state,e,t),null!=e.attrs&&$(e.attrs,e,t),e.instance=vnode.normalize(o.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function m(e,t,r,n,i,a){if(t!==r&&(null!=t||null!=r))if(null==t||0===t.length)l(e,r,0,r.length,n,i,a);else if(null==r||0===r.length)S(e,t,0,t.length);else{var o=null!=t[0]&&null!=t[0].key,s=null!=r[0]&&null!=r[0].key,c=0,h=0;if(!o)for(;h<t.length&&null==t[h];)h++;if(!s)for(;c<r.length&&null==r[c];)c++;if(null===s&&null==o)return;if(o!==s)S(e,t,h,t.length),l(e,r,c,r.length,n,i,a);else if(s){for(var d,f,m,g,y,C=t.length-1,_=r.length-1;C>=h&&_>=c&&(m=t[C],g=r[_],m.key===g.key);)m!==g&&p(e,m,g,n,i,a),null!=g.dom&&(i=g.dom),C--,_--;for(;C>=h&&_>=c&&(d=t[h],f=r[c],d.key===f.key);)h++,c++,d!==f&&p(e,d,f,n,b(t,h,i),a);for(;C>=h&&_>=c&&c!==_&&d.key===g.key&&m.key===f.key;)T(e,m,y=b(t,h,i)),m!==f&&p(e,m,f,n,y,a),++c<=--_&&T(e,d,i),d!==g&&p(e,d,g,n,i,a),null!=g.dom&&(i=g.dom),h++,m=t[--C],g=r[_],d=t[h],f=r[c];for(;C>=h&&_>=c&&m.key===g.key;)m!==g&&p(e,m,g,n,i,a),null!=g.dom&&(i=g.dom),_--,m=t[--C],g=r[_];if(c>_)S(e,t,h,C+1);else if(h>C)l(e,r,c,_+1,n,i,a);else{var x,E,O=i,I=_-c+1,N=new Array(I),R=0,L=0,D=2147483647,P=0;for(L=0;L<I;L++)N[L]=-1;for(L=_;L>=c;L--){null==x&&(x=v(t,h,C+1));var H=x[(g=r[L]).key];null!=H&&(D=H<D?H:-1,N[L-c]=H,m=t[H],t[H]=null,m!==g&&p(e,m,g,n,i,a),null!=g.dom&&(i=g.dom),P++)}if(i=O,P!==C-h+1&&S(e,t,h,C+1),0===P)l(e,r,c,_+1,n,i,a);else if(-1===D)for(R=(E=function(e){var t=[0],r=0,n=0,i=0,a=w.length=e.length;for(i=0;i<a;i++)w[i]=e[i];for(i=0;i<a;++i)if(-1!==e[i]){var o=t[t.length-1];if(e[o]<e[i])w[i]=o,t.push(i);else{for(r=0,n=t.length-1;r<n;){var s=(r>>>1)+(n>>>1)+(r&n&1);e[t[s]]<e[i]?r=s+1:n=s}e[i]<e[t[r]]&&(r>0&&(w[i]=t[r-1]),t[r]=i)}}r=t.length,n=t[r-1];for(;r-- >0;)t[r]=n,n=w[n];return w.length=0,t}(N)).length-1,L=_;L>=c;L--)f=r[L],-1===N[L-c]?u(e,f,n,a,i):E[R]===L-c?R--:T(e,f,i),null!=f.dom&&(i=r[L].dom);else for(L=_;L>=c;L--)f=r[L],-1===N[L-c]&&u(e,f,n,a,i),null!=f.dom&&(i=r[L].dom)}}else{var M=t.length<r.length?t.length:r.length;for(c=c<h?c:h;c<M;c++)(d=t[c])===(f=r[c])||null==d&&null==f||(null==d?u(e,f,n,a,b(t,c+1,i)):null==f?A(e,d):p(e,d,f,n,b(t,c+1,i),a));t.length>M&&S(e,t,c,t.length),r.length>M&&l(e,r,c,r.length,n,i,a)}}}function p(e,t,r,n,i,a){var s=t.tag;if(s===r.tag){if(r.state=t.state,r.events=t.events,function(e,t){do{var r;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate)if(void 0!==(r=o.call(e.attrs.onbeforeupdate,e,t))&&!r)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate)if(void 0!==(r=o.call(e.state.onbeforeupdate,e,t))&&!r)break;return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(r,t))return;if("string"==typeof s)switch(null!=r.attrs&&F(r.attrs,r,n),s){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,r);break;case"<":!function(e,t,r,n,i){t.children!==r.children?(x(e,t),h(e,r,n,i)):(r.dom=t.dom,r.domSize=t.domSize,r.instance=t.instance)}(e,t,r,a,i);break;case"[":!function(e,t,r,n,i,a){m(e,t.children,r.children,n,i,a);var o=0,s=r.children;if(r.dom=null,null!=s){for(var l=0;l<s.length;l++){var u=s[l];null!=u&&null!=u.dom&&(null==r.dom&&(r.dom=u.dom),o+=u.domSize||1)}1!==o&&(r.domSize=o)}}(e,t,r,n,i,a);break;default:g(t,r,n,a)}else y(e,t,r,n,i,a)}else A(e,t),u(e,r,n,a,i)}function g(e,t,r,n){var a=t.dom=e.dom;n=i(t)||n,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0)),function(e,t,r,n){if(null!=r)for(var i in r)I(e,i,t&&t[i],r[i],n);var a;if(null!=t)for(var i in t)null==(a=t[i])||null!=r&&null!=r[i]||N(e,i,a,n)}(t,e.attrs,t.attrs,n),_(t)||(null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[vnode("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[vnode("#",void 0,void 0,t.text,void 0,void 0)]),m(a,e.children,t.children,r,null,n)))}function y(e,t,r,n,i,a){if(r.instance=vnode.normalize(o.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");F(r.state,r,n),null!=r.attrs&&F(r.attrs,r,n),null!=r.instance?(null==t.instance?u(e,r.instance,n,a,i):p(e,t.instance,r.instance,n,i,a),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=t.instance?(A(e,t.instance),r.dom=void 0,r.domSize=0):(r.dom=t.dom,r.domSize=t.domSize)}function v(e,t,r){for(var n=Object.create(null);t<r;t++){var i=e[t];if(null!=i){var a=i.key;null!=a&&(n[a]=t)}}return n}var w=[];function b(e,t,r){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return r}function T(e,t,n){var i=r.createDocumentFragment();!function e(t,r,n){for(;null!=n.dom&&n.dom.parentNode===t;){if("string"!=typeof n.tag){if(null!=(n=n.instance))continue}else if("<"===n.tag)for(var i=0;i<n.instance.length;i++)r.appendChild(n.instance[i]);else if("["!==n.tag)r.appendChild(n.dom);else if(1===n.children.length){if(null!=(n=n.children[0]))continue}else for(i=0;i<n.children.length;i++){var a=n.children[i];null!=a&&e(t,r,a)}break}}(e,i,t),C(e,i,n)}function C(e,t,r){null!=r?e.insertBefore(t,r):e.appendChild(t)}function _(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var r=t[0].children;e.dom.innerHTML!==r&&(e.dom.innerHTML=r)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function S(e,t,r,n){for(var i=r;i<n;i++){var a=t[i];null!=a&&A(e,a)}}function A(e,t){var r,n,i,s=0,l=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(i=o.call(t.state.onbeforeremove,t))&&"function"==typeof i.then&&(s=1,r=i));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(i=o.call(t.attrs.onbeforeremove,t))&&"function"==typeof i.then&&(s|=2,n=i));if(a(t,l),s){if(null!=r){var u=function(){1&s&&((s&=2)||c())};r.then(u,u)}if(null!=n){u=function(){2&s&&((s&=1)||c())};n.then(u,u)}}else O(t),E(e,t);function c(){a(t,l),O(t),E(e,t)}}function x(e,t){for(var r=0;r<t.instance.length;r++)e.removeChild(t.instance[r])}function E(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)x(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var r=0;r<t.children.length;r++){var n=t.children[r];null!=n&&E(e,n)}}break}}function O(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&o.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&o.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&O(e.instance);else{var t=e.children;if(Array.isArray(t))for(var r=0;r<t.length;r++){var n=t[r];null!=n&&O(n)}}}function I(e,t,n,i,a){if("key"!==t&&"is"!==t&&null!=i&&!R(t)&&(n!==i||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===s()||"option"===e.tag&&e.dom.parentNode===r.activeElement}(e,t)||"object"==typeof i)){if("o"===t[0]&&"n"===t[1])return U(e,t,i);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),i);else if("style"===t)M(e.dom,n,i);else if(L(e,t,a)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+i&&e.dom===s())return;if("select"===e.tag&&null!==n&&e.dom.value===""+i)return;if("option"===e.tag&&null!==n&&e.dom.value===""+i)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,i):e.dom[t]=i}else"boolean"==typeof i?i?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,i)}}function N(e,t,r,n){if("key"!==t&&"is"!==t&&null!=r&&!R(t))if("o"!==t[0]||"n"!==t[1]||R(t))if("style"===t)M(e.dom,r,null);else if(!L(e,t,n)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===s())||"input"===e.tag&&"type"===t){var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==r&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else U(e,t,void 0)}function R(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function L(e,t,r){return void 0===r&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var D=/[A-Z]/g;function P(e){return"-"+e.toLowerCase()}function H(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(D,P)}function M(e,t,r){if(t===r);else if(null==r)e.style.cssText="";else if("object"!=typeof r)e.style.cssText=r;else if(null==t||"object"!=typeof t)for(var n in e.style.cssText="",r){null!=(i=r[n])&&e.style.setProperty(H(n),String(i))}else{for(var n in r){var i;null!=(i=r[n])&&(i=String(i))!==String(t[n])&&e.style.setProperty(H(n),i)}for(var n in t)null!=t[n]&&null==r[n]&&e.style.removeProperty(H(n))}}function k(){this._=t}function U(e,t,r){if(null!=e.events){if(e.events[t]===r)return;null==r||"function"!=typeof r&&"object"!=typeof r?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=r)}else null==r||"function"!=typeof r&&"object"!=typeof r||(e.events=new k,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=r)}function $(e,t,r){"function"==typeof e.oninit&&o.call(e.oninit,t),"function"==typeof e.oncreate&&r.push(o.bind(e.oncreate,t))}function F(e,t,r){"function"==typeof e.onupdate&&r.push(o.bind(e.onupdate,t))}return k.prototype=Object.create(null),k.prototype.handleEvent=function(e){var t,r=this["on"+e.type];"function"==typeof r?t=r.call(e.currentTarget,e):"function"==typeof r.handleEvent&&r.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,r,n){if(!e)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],a=s(),o=e.namespaceURI;null==e.vnodes&&(e.textContent=""),r=vnode.normalizeChildren(Array.isArray(r)?r:[r]);var l=t;try{t="function"==typeof n?n:void 0,m(e,e.vnodes,r,i,null,"http://www.w3.org/1999/xhtml"===o?void 0:o)}finally{t=l}e.vnodes=r,null!=a&&s()!==a&&"function"==typeof a.focus&&a.focus();for(var u=0;u<i.length;u++)i[u]()}},render$1=render(window),mountRedraw=function(e,t,r){var n=[],i=!1,a=!1;function o(){if(i)throw new Error("Nested m.redraw.sync() call");i=!0;for(var t=0;t<n.length;t+=2)try{e(n[t],vnode(n[t+1]),s)}catch(e){r.error(e)}i=!1}function s(){a||(a=!0,t((function(){a=!1,o()})))}return s.sync=o,{mount:function(t,r){if(null!=r&&null==r.view&&"function"!=typeof r)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var i=n.indexOf(t);i>=0&&(n.splice(i,2),e(t,[],s)),null!=r&&(n.push(t,r),e(t,vnode(r),s))},redraw:s}},mountRedraw$1=mountRedraw(render$1,requestAnimationFrame,console),build=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var r in e)n(r,e[r]);return t.join("&");function n(e,r){if(Array.isArray(r))for(var i=0;i<r.length;i++)n(e+"["+i+"]",r[i]);else if("[object Object]"===Object.prototype.toString.call(r))for(var i in r)n(e+"["+i+"]",r[i]);else t.push(encodeURIComponent(e)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}},assign=Object.assign||function(e,t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))},build$1=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(null==t)return e;var r=e.indexOf("?"),n=e.indexOf("#"),i=n<0?e.length:n,a=r<0?i:r,o=e.slice(0,a),s={};assign(s,t);var l=o.replace(/:([^\/\.-]+)(\.{3})?/g,(function(e,r,n){return delete s[r],null==t[r]?e:n?t[r]:encodeURIComponent(String(t[r]))})),u=l.indexOf("?"),c=l.indexOf("#"),h=c<0?l.length:c,d=u<0?h:u,f=l.slice(0,d);r>=0&&(f+=e.slice(r,i)),u>=0&&(f+=(r<0?"?":"&")+l.slice(u,h));var m=build(s);return m&&(f+=(r<0&&u<0?"?":"&")+m),n>=0&&(f+=e.slice(n)),c>=0&&(f+=(n<0?"":"&")+l.slice(c)),f},request=function(e,t,r){var n=0;function i(e){return new t(e)}function a(e){return function(n,a){"string"!=typeof n?(a=n,n=n.url):null==a&&(a={});var o=new t((function(t,r){e(build$1(n,a.params),a,(function(e){if("function"==typeof a.type)if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=new a.type(e[r]);else e=new a.type(e);t(e)}),r)}));if(!0===a.background)return o;var s=0;function l(){0==--s&&"function"==typeof r&&r()}return function e(t){var r=t.then;return t.constructor=i,t.then=function(){s++;var n=r.apply(t,arguments);return n.then(l,(function(e){if(l(),0===s)throw e})),e(n)},t}(o)}}function o(e,t){for(var r in e.headers)if({}.hasOwnProperty.call(e.headers,r)&&t.test(r))return!0;return!1}return i.prototype=t.prototype,i.__proto__=t,{request:a((function(t,r,n,i){var a,s=null!=r.method?r.method.toUpperCase():"GET",l=r.body,u=!(null!=r.serialize&&r.serialize!==JSON.serialize||l instanceof e.FormData),c=r.responseType||("function"==typeof r.extract?"":"json"),h=new e.XMLHttpRequest,d=!1,f=h,m=h.abort;for(var p in h.abort=function(){d=!0,m.call(this)},h.open(s,t,!1!==r.async,"string"==typeof r.user?r.user:void 0,"string"==typeof r.password?r.password:void 0),u&&null!=l&&!o(r,/^content-type$/i)&&h.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof r.deserialize||o(r,/^accept$/i)||h.setRequestHeader("Accept","application/json, text/*"),r.withCredentials&&(h.withCredentials=r.withCredentials),r.timeout&&(h.timeout=r.timeout),h.responseType=c,r.headers)({}).hasOwnProperty.call(r.headers,p)&&h.setRequestHeader(p,r.headers[p]);h.onreadystatechange=function(e){if(!d&&4===e.target.readyState)try{var a,o=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),s=e.target.response;if("json"===c?e.target.responseType||"function"==typeof r.extract||(s=JSON.parse(e.target.responseText)):c&&"text"!==c||null==s&&(s=e.target.responseText),"function"==typeof r.extract?(s=r.extract(e.target,r),o=!0):"function"==typeof r.deserialize&&(s=r.deserialize(s)),o)n(s);else{try{a=e.target.responseText}catch(e){a=s}var l=new Error(a);l.code=e.target.status,l.response=s,i(l)}}catch(e){i(e)}},"function"==typeof r.config&&(h=r.config(h,r,t)||h)!==f&&(a=h.abort,h.abort=function(){d=!0,a.call(this)}),null==l?h.send():"function"==typeof r.serialize?h.send(r.serialize(l)):l instanceof e.FormData?h.send(l):h.send(JSON.stringify(l))})),jsonp:a((function(t,r,i,a){var o=r.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+n++,s=e.document.createElement("script");e[o]=function(t){delete e[o],s.parentNode.removeChild(s),i(t)},s.onerror=function(){delete e[o],s.parentNode.removeChild(s),a(new Error("JSONP request failed"))},s.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(r.callbackKey||"callback")+"="+encodeURIComponent(o),e.document.documentElement.appendChild(s)}))}},request$1=request(window,promise,mountRedraw$1.redraw),parse=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),r={},n={},i=0;i<t.length;i++){var a=t[i].split("="),o=decodeURIComponent(a[0]),s=2===a.length?decodeURIComponent(a[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var l=o.split(/\]\[?|\[/),u=n;o.indexOf("[")>-1&&l.pop();for(var c=0;c<l.length;c++){var h=l[c],d=l[c+1],f=""==d||!isNaN(parseInt(d,10));if(""===h)null==r[o=l.slice(0,c).join()]&&(r[o]=Array.isArray(u)?u.length:0),h=r[o]++;else if("__proto__"===h)break;if(c===l.length-1)u[h]=s;else{var m=Object.getOwnPropertyDescriptor(u,h);null!=m&&(m=m.value),null==m&&(u[h]=m=f?[]:{}),u=m}}}return n},parse$1=function(e){var t=e.indexOf("?"),r=e.indexOf("#"),n=r<0?e.length:r,i=t<0?n:t,a=e.slice(0,i).replace(/\/{2,}/g,"/");return a?("/"!==a[0]&&(a="/"+a),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,-1))):a="/",{path:a,params:t<0?{}:parse(e.slice(t+1,n))}},compileTemplate=function(e){var t=parse$1(e),r=Object.keys(t.params),n=[],i=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(e,t,r){return null==t?"\\"+e:(n.push({k:t,r:"..."===r}),"..."===r?"(.*)":"."===r?"([^/]+)\\.":"([^/]+)"+(r||""))}))+"$");return function(e){for(var a=0;a<r.length;a++)if(t.params[r[a]]!==e.params[r[a]])return!1;if(!n.length)return i.test(e.path);var o=i.exec(e.path);if(null==o)return!1;for(a=0;a<n.length;a++)e.params[n[a].k]=n[a].r?o[a+1]:decodeURIComponent(o[a+1]);return!0}},sentinel={},router=function(e,t){var r;function n(t,n,i){if(t=build$1(t,n),null!=r){r();var a=i?i.state:null,o=i?i.title:null;i&&i.replace?e.history.replaceState(a,o,c.prefix+t):e.history.pushState(a,o,c.prefix+t)}else e.location.href=c.prefix+t}var i,a,o,s,l=sentinel,u=c.SKIP={};function c(h,d,f){if(null==h)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var m,p=0,g=Object.keys(f).map((function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:f[e],check:compileTemplate(e)}})),y="function"==typeof setImmediate?setImmediate:setTimeout,v=promise.resolve(),w=!1;if(r=null,null!=d){var b=parse$1(d);if(!g.some((function(e){return e.check(b)})))throw new ReferenceError("Default route doesn't match any known routes")}function T(){w=!1;var r=e.location.hash;"#"!==c.prefix[0]&&(r=e.location.search+r,"?"!==c.prefix[0]&&"/"!==(r=e.location.pathname+r)[0]&&(r="/"+r));var h=r.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(c.prefix.length),f=parse$1(h);function m(){if(h===d)throw new Error("Could not resolve default route "+d);n(d,null,{replace:!0})}assign(f.params,e.history.state),function e(r){for(;r<g.length;r++)if(g[r].check(f)){var n=g[r].component,c=g[r].route,d=n,y=s=function(c){if(y===s){if(c===u)return e(r+1);i=null==c||"function"!=typeof c.view&&"function"!=typeof c?"div":c,a=f.params,o=h,s=null,l=n.render?n:null,2===p?t.redraw():(p=2,t.redraw.sync())}};return void(n.view||"function"==typeof n?(n={},y(d)):n.onmatch?v.then((function(){return n.onmatch(f.params,h,c)})).then(y,m):y("div"))}m()}(0)}return r=function(){w||(w=!0,y(T))},"function"==typeof e.history.pushState?(m=function(){e.removeEventListener("popstate",r,!1)},e.addEventListener("popstate",r,!1)):"#"===c.prefix[0]&&(r=null,m=function(){e.removeEventListener("hashchange",T,!1)},e.addEventListener("hashchange",T,!1)),t.mount(h,{onbeforeupdate:function(){return!(!(p=p?2:1)||sentinel===l)},oncreate:T,onremove:m,view:function(){if(p&&sentinel!==l){var e=[vnode(i,a.key,a)];return l&&(e=l.render(e[0])),e}}})}return c.set=function(e,t,r){null!=s&&((r=r||{}).replace=!0),s=null,n(e,t,r)},c.get=function(){return o},c.prefix="#!",c.Link={view:function(e){var t,r,n=e.attrs.options,i={};assign(i,e.attrs),i.selector=i.options=i.key=i.oninit=i.oncreate=i.onbeforeupdate=i.onupdate=i.onbeforeremove=i.onremove=null;var a=hyperscript_1(e.attrs.selector||"a",i,e.children);return(a.attrs.disabled=Boolean(a.attrs.disabled))?(a.attrs.href=null,a.attrs["aria-disabled"]="true",a.attrs.onclick=null):(t=a.attrs.onclick,r=a.attrs.href,a.attrs.href=c.prefix+r,a.attrs.onclick=function(e){var i;"function"==typeof t?i=t.call(e.currentTarget,e):null==t||"object"!=typeof t||"function"==typeof t.handleEvent&&t.handleEvent(e),!1===i||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,c.set(r,null,n))}),a}},c.param=function(e){return a&&null!=e?a[e]:a},c},route=router(window,mountRedraw$1),m=function(){return hyperscript_1$1.apply(this,arguments)};m.m=hyperscript_1$1,m.trust=hyperscript_1$1.trust,m.fragment=hyperscript_1$1.fragment,m.mount=mountRedraw$1.mount,m.route=route,m.render=render$1,m.redraw=mountRedraw$1.redraw,m.request=request$1.request,m.jsonp=request$1.jsonp,m.parseQueryString=parse,m.buildQueryString=build,m.parsePathname=parse$1,m.buildPathname=build$1,m.vnode=vnode,m.PromisePolyfill=polyfill;var mithril=m,CSS={appContainer:".vh-100.pa4.helvetica",header:".flex.items-center.mb4",boardTitle:".f1.mr3",navigationWrapper:".w-100.flex.mb2",uploadConfigContainer:"div.upload-config.relative.w4.h2.ml4",selectFileButton:"input[type=file][name=file][id=file].absolute.overflow-hidden.o-0.top-0.left-0.w-100",selectFileLabel:"label[for=file].gray.hover-black.pointer.absolute.top-0.left-0.w-100",foldersContainer:".flex",folder:".folder.db.ba.b--black-10.w5.black.bg-light-yellow.pa2.mr3.shadow-4.br1.overflow-x-auto.relative",folderHeader:".db.flex.justify-between",folderTitle:".w-90.med-gray.f4.break-word",folderCardsWrapper:".db.w-100",folderCard:"a.db.ba.b--black-10.bg-washed-yellow.mv1.pl2.pt2.pr3.pb2.link.black.hide-child",folderCardPlaceholder:".db.ba.b--dashed.bw1.b--black-10.mt2.pa2.tc.black-30.pointer.f5",folderPlaceholder:".min-w5.h5.db.ba.b--dashed.bw1.b--black-10.w5.br1.mr3.flex.bg-washed-yellow.justify-center.items-center",inputField:"textarea.bn.mb2.db.w-90.bg-light-yellow.f4.outline-0",boardTitleInputField:"textarea.bn.f1.mr3.bg-washed-yellow",navigationTitleInputField:"textarea.bn.bg-washed-yellow",createFolderButton:"div.br-100.bg-moon-gray.white.w3.h3.flex.justify-center.items-center.f1.pointer",iconRss:"i[data-feather=rss]",iconExternalLink:"i[data-feather=external-link].child.relative.icon-external-link",iconClock:"i[data-feather=clock]",iconTrash:"i[data-feather=trash-2].black.child",iconPlus:"i[data-feather=plus-circle].moon-gray.grow.hover-gray",iconX:"i[data-feather=x].child.black.absolute.icon-remove",iconMove:"i[data-feather=move].child.black.absolute.icon-move",iconFrown:"i[data-feather=frown].mt4.mb1.icon-frown"};function _isPlaceholder(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function _curry1(e){return function t(r){return 0===arguments.length||_isPlaceholder(r)?t:e.apply(this,arguments)}}function _curry2(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(r)?t:_curry1((function(t){return e(r,t)}));default:return _isPlaceholder(r)&&_isPlaceholder(n)?t:_isPlaceholder(r)?_curry1((function(t){return e(t,n)})):_isPlaceholder(n)?_curry1((function(t){return e(r,t)})):e(r,n)}}}function _arity(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,a){return t.apply(this,arguments)};case 6:return function(e,r,n,i,a,o){return t.apply(this,arguments)};case 7:return function(e,r,n,i,a,o,s){return t.apply(this,arguments)};case 8:return function(e,r,n,i,a,o,s,l){return t.apply(this,arguments)};case 9:return function(e,r,n,i,a,o,s,l,u){return t.apply(this,arguments)};case 10:return function(e,r,n,i,a,o,s,l,u,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(e,t,r){return function(){for(var n=[],i=0,a=e,o=0;o<t.length||i<arguments.length;){var s;o<t.length&&(!_isPlaceholder(t[o])||i>=arguments.length)?s=t[o]:(s=arguments[i],i+=1),n[o]=s,_isPlaceholder(s)||(a-=1),o+=1}return a<=0?r.apply(this,n):_arity(a,_curryN(e,n,r))}}var curryN=_curry2((function(e,t){return 1===e?_curry1(t):_arity(e,_curryN(e,[],t))}));function _curry3(e){return function t(r,n,i){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(r)?t:_curry2((function(t,n){return e(r,t,n)}));case 2:return _isPlaceholder(r)&&_isPlaceholder(n)?t:_isPlaceholder(r)?_curry2((function(t,r){return e(t,n,r)})):_isPlaceholder(n)?_curry2((function(t,n){return e(r,t,n)})):_curry1((function(t){return e(r,n,t)}));default:return _isPlaceholder(r)&&_isPlaceholder(n)&&_isPlaceholder(i)?t:_isPlaceholder(r)&&_isPlaceholder(n)?_curry2((function(t,r){return e(t,r,i)})):_isPlaceholder(r)&&_isPlaceholder(i)?_curry2((function(t,r){return e(t,n,r)})):_isPlaceholder(n)&&_isPlaceholder(i)?_curry2((function(t,n){return e(r,t,n)})):_isPlaceholder(r)?_curry1((function(t){return e(t,n,i)})):_isPlaceholder(n)?_curry1((function(t){return e(r,t,i)})):_isPlaceholder(i)?_curry1((function(t){return e(r,n,t)})):e(r,n,i)}}}var _isArray=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function _isTransformer(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function _dispatchable(e,t,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),i=n.pop();if(!_isArray(i)){for(var a=0;a<e.length;){if("function"==typeof i[e[a]])return i[e[a]].apply(i,n);a+=1}if(_isTransformer(i)){var o=t.apply(null,n);return o(i)}}return r.apply(this,arguments)}}var _xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function _map(e,t){for(var r=0,n=t.length,i=Array(n);r<n;)i[r]=e(t[r]),r+=1;return i}function _isString(e){return"[object String]"===Object.prototype.toString.call(e)}var _isArrayLike=_curry1((function(e){return!!_isArray(e)||!!e&&("object"==typeof e&&(!_isString(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),XWrap=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function _xwrap(e){return new XWrap(e)}var bind=_curry2((function(e,t){return _arity(e.length,(function(){return e.apply(t,arguments)}))}));function _arrayReduce(e,t,r){for(var n=0,i=r.length;n<i;){if((t=e["@@transducer/step"](t,r[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}function _iterableReduce(e,t,r){for(var n=r.next();!n.done;){if((t=e["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function _methodReduce(e,t,r,n){return e["@@transducer/result"](r[n](bind(e["@@transducer/step"],e),t))}var symIterator="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _reduce(e,t,r){if("function"==typeof e&&(e=_xwrap(e)),_isArrayLike(r))return _arrayReduce(e,t,r);if("function"==typeof r["fantasy-land/reduce"])return _methodReduce(e,t,r,"fantasy-land/reduce");if(null!=r[symIterator])return _iterableReduce(e,t,r[symIterator]());if("function"==typeof r.next)return _iterableReduce(e,t,r);if("function"==typeof r.reduce)return _methodReduce(e,t,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var XMap=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=_xfBase.init,e.prototype["@@transducer/result"]=_xfBase.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),_xmap=_curry2((function(e,t){return new XMap(e,t)}));function _has(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var toString=Object.prototype.toString,_isArguments=function(){return"[object Arguments]"===toString.call(arguments)?function(e){return"[object Arguments]"===toString.call(e)}:function(e){return _has("callee",e)}}(),hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug=function(){return arguments.propertyIsEnumerable("length")}(),contains=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1},keys="function"!=typeof Object.keys||hasArgsEnumBug?_curry1((function(e){if(Object(e)!==e)return[];var t,r,n=[],i=hasArgsEnumBug&&_isArguments(e);for(t in e)!_has(t,e)||i&&"length"===t||(n[n.length]=t);if(hasEnumBug)for(r=nonEnumerableProps.length-1;r>=0;)_has(t=nonEnumerableProps[r],e)&&!contains(n,t)&&(n[n.length]=t),r-=1;return n})):_curry1((function(e){return Object(e)!==e?[]:Object.keys(e)})),map=_curry2(_dispatchable(["fantasy-land/map","map"],_xmap,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return curryN(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return _reduce((function(r,n){return r[n]=e(t[n]),r}),{},keys(t));default:return _map(e,t)}}))),_isInteger=Number.isInteger||function(e){return e<<0===e},nth=_curry2((function(e,t){var r=e<0?t.length+e:e;return _isString(t)?t.charAt(r):t[r]})),paths=_curry2((function(e,t){return e.map((function(e){for(var r,n=t,i=0;i<e.length;){if(null==n)return;r=e[i],n=_isInteger(r)?nth(r,n):n[r],i+=1}return n}))})),path=_curry2((function(e,t){return paths([e],t)[0]})),prop=_curry2((function(e,t){return path([e],t)})),always=_curry1((function(e){return function(){return e}})),values=_curry1((function(e){for(var t=keys(e),r=t.length,n=[],i=0;i<r;)n[i]=e[t[i]],i+=1;return n})),assoc=_curry3((function(e,t,r){var n={};for(var i in r)n[i]=r[i];return n[e]=t,n})),isNil=_curry1((function(e){return null==e})),assocPath=_curry3((function e(t,r,n){if(0===t.length)return r;var i=t[0];if(t.length>1){var a=!isNil(n)&&_has(i,n)?n[i]:_isInteger(t[1])?[]:{};r=e(Array.prototype.slice.call(t,1),r,a)}if(_isInteger(i)&&_isArray(n)){var o=[].concat(n);return o[i]=r,o}return assoc(i,r,n)}));function _cloneRegExp(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var type=_curry1((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function _clone(e,t,r,n){var i=function(i){for(var a=t.length,o=0;o<a;){if(e===t[o])return r[o];o+=1}for(var s in t[o+1]=e,r[o+1]=i,e)i[s]=n?_clone(e[s],t,r,!0):e[s];return i};switch(type(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return _cloneRegExp(e);default:return e}}var clone=_curry1((function(e){return null!=e&&"function"==typeof e.clone?e.clone():_clone(e,[],[],!0)})),dissoc=_curry2((function(e,t){var r={};for(var n in t)r[n]=t[n];return delete r[e],r}));function _objectAssign(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,n=arguments.length;r<n;){var i=arguments[r];if(null!=i)for(var a in i)_has(a,i)&&(t[a]=i[a]);r+=1}return t}var _objectAssign$1="function"==typeof Object.assign?Object.assign:_objectAssign,lens=_curry2((function(e,t){return function(r){return function(n){return map((function(e){return t(e,n)}),r(e(n)))}}})),lensPath=_curry1((function(e){return lens(path(e),assocPath(e))})),merge=_curry2((function(e,t){return _objectAssign$1({},e,t)})),Identity=function(e){return{value:e,map:function(t){return Identity(t(e))}}},over=_curry3((function(e,t,r){return e((function(e){return Identity(t(e))}))(r).value})),pick=_curry2((function(e,t){for(var r={},n=0;n<e.length;)e[n]in t&&(r[e[n]]=t[e[n]]),n+=1;return r})),set=_curry3((function(e,t,r){return over(e,always(t),r)})),Const=function(e){return{value:e,"fantasy-land/map":function(){return this}}},view=_curry2((function(e,t){return e(Const)(t).value}));const ParserEND=1114112;class ParserError extends Error{constructor(e,t,r){super("[ParserError] "+e,t,r),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,ParserError)}}class State{constructor(e){this.parser=e,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class Parser{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new State(this.parseStart)}parse(e){if(0===e.length||null==e.length)return;let t;for(this._buf=String(e),this.ii=-1,this.char=-1;!1===t||this.nextChar();)t=this.runOne();this._buf=null}nextChar(){return 10===this.char&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){let e;this.char=ParserEND;do{e=this.state.parser,this.runOne()}while(this.state.parser!==e);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(e){if("function"!=typeof e)throw new ParserError("Tried to set state to non-existent state: "+JSON.stringify(e));this.state.parser=e}goto(e){return this.next(e),this.runOne()}call(e,t){t&&this.next(t),this.stack.push(this.state),this.state=new State(e)}callNow(e,t){return this.call(e,t),this.runOne()}return(e){if(0===this.stack.length)throw this.error(new ParserError("Stack underflow"));void 0===e&&(e=this.state.buf),this.state=this.stack.pop(),this.state.returned=e}returnNow(e){return this.return(e),this.runOne()}consume(){if(this.char===ParserEND)throw this.error(new ParserError("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(e){return e.line=this.line,e.col=this.col,e.pos=this.pos,e}parseStart(){throw new ParserError("Must declare a parseStart method")}}Parser.END=ParserEND,Parser.Error=ParserError;var parser=Parser,createDatetime=e=>{const t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t},formatNum=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t};class FloatingDateTime extends Date{constructor(e){super(e+"Z"),this.isFloating=!0}toISOString(){return`${`${this.getUTCFullYear()}-${formatNum(2,this.getUTCMonth()+1)}-${formatNum(2,this.getUTCDate())}`}T${`${formatNum(2,this.getUTCHours())}:${formatNum(2,this.getUTCMinutes())}:${formatNum(2,this.getUTCSeconds())}.${formatNum(3,this.getUTCMilliseconds())}`}`}}var createDatetimeFloat=e=>{const t=new FloatingDateTime(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t};const DateTime=commonjsGlobal.Date;class Date$1 extends DateTime{constructor(e){super(e),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${formatNum(2,this.getUTCMonth()+1)}-${formatNum(2,this.getUTCDate())}`}}var createDate=e=>{const t=new Date$1(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t};class Time extends Date{constructor(e){super(`0000-01-01T${e}Z`),this.isTime=!0}toISOString(){return`${formatNum(2,this.getUTCHours())}:${formatNum(2,this.getUTCMinutes())}:${formatNum(2,this.getUTCSeconds())}.${formatNum(3,this.getUTCMilliseconds())}`}}var createTime=e=>{const t=new Time(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t},tomlParser=makeParserClass(parser),makeParserClass_1=makeParserClass;class TomlError extends Error{constructor(e){super(e),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=e=>{const t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t};var TomlError_1=TomlError;const CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"\t",[CHAR_n]:"\n",[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return!!hasOwnProperty.call(e,t)||("__proto__"===t&&defineProperty(e,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return null!==e&&"object"==typeof e&&e[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return null!==e&&"object"==typeof e&&e[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(e){try{this.value=commonjsGlobal.BigInt.asIntN(64,e)}catch(e){this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return null===this.value}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),commonjsGlobal.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return null!==e&&"object"==typeof e&&e[_type]===INTEGER}const FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return null!==e&&"object"==typeof e&&e[_type]===FLOAT}function tomlType(e){const t=typeof e;if("object"===t){if(null===e)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){return class extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(e){let t=this.ctx,r=e.key.pop();for(let r of e.key){if(hasKey(t,r)&&(!isTable(t[r])||t[r][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[r]=t[r]||Table()}if(hasKey(t,r))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[r]=e.value.valueOf():t[r]=e.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(e){return this.state.resultTable?this.state.resultTable.push(e):this.state.resultTable=[e],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){return this.char===CHAR_PERIOD?this.next(this.parseAssignKeywordPostDot):this.char!==CHAR_SP&&this.char!==CTRL_I?this.goto(this.parseAssignEqual):void 0}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(e){return this.returnNow({key:this.state.resultTable,value:e})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return()}while(this.nextChar())}parseTableOrList(){if(this.char!==CHAR_LSQB)return this.goto(this.parseTable);this.next(this.parseList)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)&&(!isTable(this.ctx[e])||this.ctx[e][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[e]=this.ctx[e]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e))if(isTable(this.ctx[e]))this.ctx=this.ctx[e];else{if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine existing key"));this.ctx=this.ctx[e][this.ctx[e].length-1]}else this.ctx=this.ctx[e]=Table();return this.next(this.parseTableNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)||(this.ctx[e]=List()),isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));{const t=Table();this.ctx[e].push(t),this.ctx=t}return this.next(this.parseListEnd)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e)){if(isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[e]))this.ctx=this.ctx[e][this.ctx[e].length-1];else{if(!isTable(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));this.ctx=this.ctx[e]}}else this.ctx=this.ctx[e]=Table();return this.next(this.parseListNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(e){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(e){return this.returnNow(e)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return"-"===this.state.buf?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(!isAlphaNumHyphen(this.char)){if(0===this.state.buf.length)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}this.consume()}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let e="\\u00";return this.char<16&&(e+="0"),e+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${e} instead`))}recordMultiEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(e){try{const t=parseInt(e,16);if(t>=SURROGATE_FIRST&&t<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(t))}catch(e){throw this.error(TomlError.wrap(e))}}parseSmallUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=4)return this.return()}parseLargeUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=8)return this.return()}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(!isDigit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberFloat):isDigit(this.char)?void this.consume():this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS)throw this.error(new TomlError("Unexpected character, expected -, + or digit"));this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent)}parseNumberExponent(){if(!isDigit(this.char))return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf));this.consume()}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberInteger):isDigit(this.char)?(this.consume(),void(this.state.buf.length>4&&this.next(this.parseNumberInteger))):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(!isHexit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerOct(){if(!isOctit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerBin(){if(!isBit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}this.consume()}parseTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));if(this.consume(),2===this.state.buf.length)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}this.consume()}parseOnlyTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete time"));if(this.consume(),2===this.state.buf.length)return this.next(this.parseOnlyTimeFractionMaybe)}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char!==CHAR_PERIOD)return this.return(createTime(this.state.result));this.state.buf="",this.next(this.parseOnlyTimeFraction)}parseOnlyTimeFraction(){if(!isDigit(this.char)){if(this.atEndOfWord()){if(0===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume()}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else{if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDatetime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDatetimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(1===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDatetime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDatetimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseTimeZoneHour(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}parseTimeZoneSep(){if(this.char!==CHAR_COLON)throw this.error(new TomlError("Unexpected character in datetime, expected colon"));this.consume(),this.next(this.parseTimeZoneMin)}parseTimeZoneMin(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDatetime(this.state.result+this.state.buf))}parseBoolean(){return this.char===CHAR_t?(this.consume(),this.next(this.parseTrue_r)):this.char===CHAR_f?(this.consume(),this.next(this.parseFalse_a)):void 0}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(e){if(this.state.resultArr){const t=this.state.resultArr[_contentType],r=tomlType(e);if(t!==r)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${t} and ${r}`))}else this.state.resultArr=InlineList(tomlType(e));return isFloat(e)||isInteger(e)?this.state.resultArr.push(e.valueOf()):this.state.resultArr.push(e),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(e){let t=this.state.resultTable,r=e.key.pop();for(let r of e.key){if(hasKey(t,r)&&(!isTable(t[r])||t[r][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[r]=t[r]||Table()}if(hasKey(t,r))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[r]=e.value.valueOf():t[r]=e.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}}tomlParser.makeParserClass=makeParserClass_1,tomlParser.TomlError=TomlError_1;var parsePrettyError=prettyError;function prettyError(e,t){if(null==e.pos||null==e.line)return e;let r=e.message;if(r+=` at row ${e.line+1}, col ${e.col+1}, pos ${e.pos}:\n`,t&&t.split){const n=t.split(/\n/),i=String(Math.min(n.length,e.line+3)).length;let a=" ";for(;a.length<i;)a+=" ";for(let t=Math.max(0,e.line-1);t<Math.min(n.length,e.line+2);++t){let o=String(t+1);if(o.length<i&&(o=" "+o),e.line===t){r+=o+"> "+n[t]+"\n",r+=a+"  ";for(let t=0;t<e.col;++t)r+=" ";r+="^\n"}else r+=o+": "+n[t]+"\n"}}return e.message=r+"\n",e}var parseString_1=parseString;function parseString(e){commonjsGlobal.Buffer&&commonjsGlobal.Buffer.isBuffer(e)&&(e=e.toString("utf8"));const t=new tomlParser;try{return t.parse(e),t.finish()}catch(t){throw parsePrettyError(t,e)}}var parseAsync_1=parseAsync;function parseAsync(e,t){t||(t={});const r=t.blocksize||40960,n=new tomlParser;return new Promise((e,t)=>{setImmediate(i,0,r,e,t)});function i(t,r,a,o){if(t>=e.length)try{return a(n.finish())}catch(t){return o(parsePrettyError(t,e))}try{n.parse(e.slice(t,t+r)),setImmediate(i,t+r,r,a,o)}catch(t){o(parsePrettyError(t,e))}}}var parseStream_1=parseStream;function parseStream(e){return e?parseReadable(e):parseTransform()}function parseReadable(e){const t=new tomlParser;return e.setEncoding("utf8"),new Promise((r,n)=>{let i,a=!1,o=!1;function s(){if(a=!0,!i)try{r(t.finish())}catch(e){n(e)}}function l(e){o=!0,n(e)}e.once("end",s),e.once("error",l),function r(){let n;i=!0;for(;null!==(n=e.read());)try{t.parse(n)}catch(e){return l(e)}if(i=!1,a)return s();if(o)return;e.once("readable",r)}()})}function parseTransform(){const e=new tomlParser;return new stream$1.Transform({objectMode:!0,transform(t,r,n){try{e.parse(t.toString(r))}catch(e){this.emit("error",e)}n()},flush(t){try{this.push(e.finish())}catch(e){this.emit("error",e)}t()}})}var parse$2=parseString_1,async=parseAsync_1,stream=parseStream_1,prettyError$1=parsePrettyError;parse$2.async=async,parse$2.stream=stream,parse$2.prettyError=prettyError$1;var stringify_1=stringify,value=stringifyInline;function stringify(e){if(null===e)throw typeError("null");if(void 0===e)throw typeError("undefined");if("object"!=typeof e)throw typeError(typeof e);if("function"==typeof e.toJSON&&(e=e.toJSON()),null==e)return null;const t=tomlType$1(e);if("table"!==t)throw typeError(t);return stringifyObject("","",e)}function typeError(e){return new Error("Can only stringify objects, not "+e)}function arrayOneTypeError(){return new Error("Array values can't have mixed types")}function getInlineKeys(e){return Object.keys(e).filter(t=>isInline(e[t]))}function getComplexKeys(e){return Object.keys(e).filter(t=>!isInline(e[t]))}function toJSON(e){let t=Array.isArray(e)?[]:Object.prototype.hasOwnProperty.call(e,"__proto__")?{["__proto__"]:void 0}:{};for(let r of Object.keys(e))e[r]&&"function"==typeof e[r].toJSON&&!("toISOString"in e[r])?t[r]=e[r].toJSON():t[r]=e[r];return t}function stringifyObject(e,t,r){var n,i;n=getInlineKeys(r=toJSON(r)),i=getComplexKeys(r);var a=[],o=t||"";n.forEach(e=>{var t=tomlType$1(r[e]);"undefined"!==t&&"null"!==t&&a.push(o+stringifyKey(e)+" = "+stringifyAnyInline(r[e],!0))}),a.length>0&&a.push("");var s=e&&n.length>0?t+"  ":"";return i.forEach(t=>{a.push(stringifyComplex(e,s,t,r[t]))}),a.join("\n")}function isInline(e){switch(tomlType$1(e)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return 0===e.length||"table"!==tomlType$1(e[0]);case"table":return 0===Object.keys(e).length;default:return!1}}function tomlType$1(e){return void 0===e?"undefined":null===e?"null":"bigint"==typeof e||Number.isInteger(e)&&!Object.is(e,-0)?"integer":"number"==typeof e?"float":"boolean"==typeof e?"boolean":"string"==typeof e?"string":"toISOString"in e?isNaN(e)?"undefined":"datetime":Array.isArray(e)?"array":"table"}function stringifyKey(e){var t=String(e);return/^[-A-Za-z0-9_]+$/.test(t)?t:stringifyBasicString(t)}function stringifyBasicString(e){return'"'+escapeString(e).replace(/"/g,'\\"')+'"'}function stringifyLiteralString(e){return"'"+e+"'"}function numpad(e,t){for(;t.length<e;)t="0"+t;return t}function escapeString(e){return e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,e=>"\\u"+numpad(4,e.codePointAt(0).toString(16)))}function stringifyMultilineString(e){let t=e.split(/\n/).map(e=>escapeString(e).replace(/"(?="")/g,'\\"')).join("\n");return'"'===t.slice(-1)&&(t+="\\\n"),'"""\n'+t+'"""'}function stringifyAnyInline(e,t){let r=tomlType$1(e);return"string"===r&&(t&&/\n/.test(e)?r="string-multiline":!/[\b\t\n\f\r']/.test(e)&&/"/.test(e)&&(r="string-literal")),stringifyInline(e,r)}function stringifyInline(e,t){switch(t||(t=tomlType$1(e)),t){case"string-multiline":return stringifyMultilineString(e);case"string":return stringifyBasicString(e);case"string-literal":return stringifyLiteralString(e);case"integer":return stringifyInteger(e);case"float":return stringifyFloat(e);case"boolean":return stringifyBoolean(e);case"datetime":return stringifyDatetime(e);case"array":return stringifyInlineArray(e.filter(e=>"null"!==tomlType$1(e)&&"undefined"!==tomlType$1(e)&&"nan"!==tomlType$1(e)));case"table":return stringifyInlineTable(e);default:throw typeError(t)}}function stringifyInteger(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function stringifyFloat(e){if(e===1/0)return"inf";if(e===-1/0)return"-inf";if(Object.is(e,NaN))return"nan";if(Object.is(e,-0))return"-0.0";var t=String(e).split("."),r=t[0],n=t[1]||0;return stringifyInteger(r)+"."+n}function stringifyBoolean(e){return String(e)}function stringifyDatetime(e){return e.toISOString()}function isNumber(e){return"float"===e||"integer"===e}function arrayType(e){var t=tomlType$1(e[0]);return e.every(e=>tomlType$1(e)===t)?t:e.every(e=>isNumber(tomlType$1(e)))?"float":"mixed"}function validateArray(e){const t=arrayType(e);if("mixed"===t)throw arrayOneTypeError();return t}function stringifyInlineArray(e){const t=validateArray(e=toJSON(e));var r="[",n=e.map(e=>stringifyInline(e,t));return n.join(", ").length>60||/\n/.test(n)?r+="\n  "+n.join(",\n  ")+"\n":r+=" "+n.join(", ")+(n.length>0?" ":""),r+"]"}function stringifyInlineTable(e){e=toJSON(e);var t=[];return Object.keys(e).forEach(r=>{t.push(stringifyKey(r)+" = "+stringifyAnyInline(e[r],!1))}),"{ "+t.join(", ")+(t.length>0?" ":"")+"}"}function stringifyComplex(e,t,r,n){var i=tomlType$1(n);if("array"===i)return stringifyArrayOfTables(e,t,r,n);if("table"===i)return stringifyComplexTable(e,t,r,n);throw typeError(i)}function stringifyArrayOfTables(e,t,r,n){validateArray(n=toJSON(n));var i=tomlType$1(n[0]);if("table"!==i)throw typeError(i);var a=e+stringifyKey(r),o="";return n.forEach(e=>{o.length>0&&(o+="\n"),o+=t+"[["+a+"]]\n",o+=stringifyObject(a+".",t,e)}),o}function stringifyComplexTable(e,t,r,n){var i=e+stringifyKey(r),a="";return getInlineKeys(n).length>0&&(a+=t+"["+i+"]\n"),a+stringifyObject(i+".",t,n)}stringify_1.value=value;var parse$3=parse$2,stringify$1=stringify_1,toml={parse:parse$3,stringify:stringify$1},ALPHABET="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",ID_LENGTH=8,generateId=function(e){return function(){for(var t="".concat(e,"_"),r=0;r<ID_LENGTH;r++)t+=ALPHABET.charAt(Math.floor(Math.random()*ALPHABET.length));return t}},readConfigFile=function(e){return function(t){var r=t.target.files[0];if(r){var n=new FileReader;n.onload=function(t){var r=toml.parse(t.target.result);e(r)},n.readAsText(r)}}},SECOND=1e3,SAMPLE_BOARD={SBoard:{title:"Sample board",folders:[{title:"Folder 1",cards:[{title:"Card A"}]},{title:"Folder 2",cards:[{title:"Card B"},{title:"Card C"}]}],timezones:["Europe/Istanbul"],rss_url:null}},CORS_PROXY="https://api.rss2json.com/v1/api.json?rss_url=",LOCAL_STORAGE_DATA_KEY="boards",LOCAL_STORAGE_ACTIVE_KEY="active",makeBoardId=generateId("BOARD"),makeFolderId=generateId("FOLDER"),makeCardId=generateId("CARD"),historyIndex=0,history=[];history.push=function(){this.length>=10&&this.shift(),this.length&&historyIndex!==this.length-1&&this.splice(historyIndex+1),Array.prototype.push.apply(this,arguments),historyIndex=this.length-1};var view$1=function(e){return view(e,Boards._data)},set$1=function(e,t,r){return set(e,t,r||Boards._data)},boardsLens=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];return e&&t.push(e),lensPath(t)},foldersLens=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[Boards.active,"folders"];return e&&t.push(e),lensPath(t)},cardsLens=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[Boards.active,"folders",e,"cards"];return t&&r.push(t),lensPath(r)},Boards={_data:null,active:null,setActive:function(e){Boards.active=e||null,localStorage.setItem(LOCAL_STORAGE_ACTIVE_KEY,JSON.stringify(e))},commit:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Boards._data=e,Boards.cache(),t&&history.push(e)},get hasUndo(){return 0!==historyIndex},get hasRedo(){return historyIndex!==history.length-1},undo:function(){Boards.hasUndo&&(historyIndex-=1,Boards.commit(clone(history[historyIndex]),!1))},redo:function(){Boards.hasRedo&&(historyIndex+=1,Boards.commit(clone(history[historyIndex]),!1))},getAll:function(){return values(view$1(boardsLens())).sort((function(e,t){return e.index-t.index}))},getActiveBoard:function(){return view$1(boardsLens(Boards.active))},getActiveBoardFolders:function(){return values(view$1(foldersLens()))},getNavigationData:function(){return map(pick(["id","title"]),Boards.getAll())},createBoard:function(){var e=makeBoardId(),t=boardsLens(e);if(view$1(t))return Boards.createBoard();var r={id:e,index:Object.keys(view$1(boardsLens())).length+1,title:null,timezones:[],rss_url:null,folders:{}};Boards.commit(set$1(t,r))},removeBoard:function(e){var t=Boards.getAll().find((function(t){return t.id!==e}));t&&Boards.setActive(t.id);var r=boardsLens();Boards.commit(set$1(r,dissoc(e,view$1(r))))},updateBoardTitle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=boardsLens(t||Boards.active);Boards.commit(set$1(r,merge(view$1(r),{title:e})))},createFolder:function(){var e=makeFolderId(),t=foldersLens(e);if(view$1(t))return Boards.createFolder();var r={title:null,cards:{},id:e,boardId:Boards.active};Boards.commit(set$1(t,r))},removeFolder:function(e){var t=foldersLens();Boards.commit(set$1(t,dissoc(e,view$1(t))))},updateFolderTitle:function(e,t){var r=foldersLens(e);Boards.commit(set$1(r,merge(view$1(r),{title:t})))},addFolderCard:function(e,t,r){var n=makeCardId(),i=cardsLens(e,n);if(view$1(i))return addFolderItem(e,t,r);var a={title:t,link:r,id:n,index:Object.keys(view$1(cardsLens(e))).length+1};Boards.commit(set$1(i,a))},removeFolderCard:function(e,t){var r=cardsLens(e,t),n=prop("index",view$1(r));delete Boards._data[Boards.active].folders[e].cards[t];var i=Object.keys(view$1(cardsLens(e))).reduce((function(t,r){var i=view$1(cardsLens(e,r));return i.index>=n&&(i.index-=1),t[r]=i,t}),{});Boards.commit(set$1(cardsLens(e),i))},moveCard:function(e,t,r,n){var i,a,o=view$1(cardsLens(t,e));if(t===r){var s=(i=Object.values(view$1(cardsLens(t))).sort((function(e,t){return e.index-t.index}))).find((function(e){return e.index===n})),l=i.indexOf(o),u=i.indexOf(s),c=l<u?u+1:u,h=l>u?l+1:l;c!==h&&(i.splice(c,0,o),i.splice(h,1))}else{(i=Object.values(view$1(cardsLens(r))).sort((function(e,t){return e.index-t.index}))).find((function(e){return e.index===n}))?i.splice(n-1,0,o):i.push(o),a=set$1(cardsLens(t),dissoc(e,view$1(cardsLens(t))))}a=set$1(cardsLens(r),i.reduce((function(e,t,r){return t.index=r+1,e[t.id]=t,e}),{}),a),Boards.commit(a)},cache:function(){return localStorage.setItem(LOCAL_STORAGE_DATA_KEY,JSON.stringify(view$1(boardsLens())))},loadFromCache:function(){var e=JSON.parse(localStorage.getItem(LOCAL_STORAGE_DATA_KEY)),t=JSON.parse(localStorage.getItem(LOCAL_STORAGE_ACTIVE_KEY));if(e){var r=t||prop("id",values(view(boardsLens(),e)).find((function(e){return 1===e.index})));Boards.setActive(r),Boards.commit(e)}},loadFromConfig:function(e){var t=Object.values(e).reduce((function(e,t,r){var n=makeBoardId();return e[n]={id:n,index:r+1,title:t.title,timezones:t.timezones,rss_url:t.rss_url,folders:Object.values(t.folders).reduce((function(e,t){var r=makeFolderId();return e[r]={title:t.title,id:r,cards:t.cards.reduce((function(e,t,r){var n=makeCardId();return e[n]=_objectSpread2(_objectSpread2({},t),{},{id:n,index:r+1}),e}),{})},e}),{})},e}),{});Boards.setActive(prop("id",values(view(boardsLens(),t)).find((function(e){return 1===e.index})))),Boards.commit(t)},init:function(){Boards.loadFromCache(),Boards._data||Boards.loadFromConfig(SAMPLE_BOARD)}},Feed={data:null,error:null,fetch:function(e){return mithril.request({method:"GET",url:CORS_PROXY+e}).then((function(e){var t=e.items;return Feed.data=t.reduce((function(e,t){return e[t.guid]=t,e}),{})})).catch((function(e){return Feed.error=e}))}},PlaceholderCard=function(){var e=!1,t=null;return{view:function(r){var n=r.attrs;return!e&&t&&(t=null),mithril(CSS.folderCardPlaceholder,{onclick:function(){return e=!0}},e?mithril("".concat(CSS.inputField,".f5"),{oncreate:function(e){return e.dom.focus()},value:t,maxlength:70,oninput:function(e){return t=e.target.value},onfocusout:function(){e=!1,t=null},onkeydown:function(r){"Enter"===r.key&&(e=!1,t&&Boards.addFolderCard(n.folderId,t),t=null),"Escape"===r.key&&(e=!1,t=null)}}):"add card")}}},initialDragAndDropCardsState={sourceCard:null,targetCard:null,sourceFolderId:null},dragAndDropCardsState=_objectSpread2({},initialDragAndDropCardsState),resetDragAndDropCardsState=function(){dragAndDropCardsState=_objectSpread2({},initialDragAndDropCardsState)},getDragAndDropCardStateClass=function(e){return e===dragAndDropCardsState.sourceCard?"dragging":e===dragAndDropCardsState.targetCard?"dropping":""},Folder=function(e){var t=!e.attrs.title,r=null;return{view:function(n){var i=n.attrs,a=Object.values(i.cards).sort((function(e,t){return e.index-t.index}));return mithril(CSS.folder,{ondragover:function(e){e.preventDefault()},ondrop:function(e){if(e.preventDefault(),dragAndDropCardsState.sourceCard)return Boards.moveCard(dragAndDropCardsState.sourceCard.id,dragAndDropCardsState.sourceFolderId,i.id,dragAndDropCardsState.targetCard?dragAndDropCardsState.targetCard.index:1),void resetDragAndDropCardsState()}},[mithril(CSS.folderHeader,t?mithril(CSS.inputField,{oncreate:function(e){return e.dom.focus()},value:r,maxlength:30,oninput:function(e){return r=e.target.value},onfocusout:function(){t=!1,i.title||r||Boards.removeFolder(i.id),r=null},onkeydown:function(e){if("Enter"===e.key){if(t=!1,r)return Boards.updateFolderTitle(i.id,r),void(r=null);i.title||r||Boards.removeFolder(i.id)}"Escape"===e.key&&(t=!1,i.title||Boards.removeFolder(i.id))}}):[mithril(CSS.folderTitle,{ondblclick:function(){t=!0,r=i.title}},i.title),mithril(".pointer",{onclick:function(){return Boards.removeFolder(i.id)}},mithril(CSS.iconTrash))]),mithril(CSS.folderCardsWrapper,{id:e.attrs.id,style:{minHeight:"160px"}},a.length?a.map((function(e){return mithril(".relative.hide-child.break-word",{id:e.id},[mithril(CSS.folderCard,{draggable:!0,href:e.link,class:getDragAndDropCardStateClass(e),ondragstart:function(t){dragAndDropCardsState.sourceCard=e,dragAndDropCardsState.sourceFolderId=i.id},ondragover:function(t){dragAndDropCardsState.sourceCard&&(dragAndDropCardsState.targetCard=e)},ondragend:function(e){resetDragAndDropCardsState()}},e.title),mithril(".pointer",{onclick:function(){return Boards.removeFolderCard(i.id,e.id)}},mithril(CSS.iconX))])})):null),mithril(PlaceholderCard,{boardId:i.boardId,folderId:i.id})])}}},FolderPlaceholder={view:function(e){e.attrs;return mithril(CSS.folderPlaceholder,mithril(".pointer",{onclick:function(){return Boards.createFolder()}},mithril("".concat(CSS.iconPlus,".icon-plus--big"))))}},Rss={oninit:function(e){var t=e.attrs;return Feed.fetch(t.url)},view:function(){return mithril(CSS.folder,[mithril(CSS.iconRss),Feed.data||Feed.error?null:"Loading..",Feed.error?mithril(".db.pa2.tc",[mithril(CSS.iconFrown),mithril(".f6","error fetching url: ".concat(attrs.url))]):null,Feed.data?Object.values(Feed.data).map((function(e){return mithril(CSS.folderCard,{href:e.link,target:"_blank"},[e.title,mithril(CSS.iconExternalLink)])})):null])}};function requiredArgs(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function toDate(e){requiredArgs(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function isValid(e){requiredArgs(1,arguments);var t=toDate(e);return!isNaN(t)}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function formatDistance(e,t,r){var n;return r=r||{},n="string"==typeof formatDistanceLocale[e]?formatDistanceLocale[e]:1===t?formatDistanceLocale[e].one:formatDistanceLocale[e].other.replace("{{count}}",t),r.addSuffix?r.comparison>0?"in "+n:n+" ago":n}function buildFormatLongFn(e){return function(t){var r=t||{},n=r.width?String(r.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function formatRelative(e,t,r,n){return formatRelativeLocale[e]}function buildLocalizeFn(e){return function(t,r){var n,i=r||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;n=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;n=e.values[l]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function ordinalNumber(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"}var localize={ordinalNumber:ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchPatternFn(e){return function(t,r){var n=String(t),i=r||{},a=n.match(e.matchPattern);if(!a)return null;var o=a[0],s=n.match(e.parsePattern);if(!s)return null;var l=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:n.slice(o.length)}}}function buildMatchFn(e){return function(t,r){var n=String(t),i=r||{},a=i.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=n.match(o);if(!s)return null;var l,u=s[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(c)?findIndex(c,(function(e){return e.test(u)})):findKey(c,(function(e){return e.test(u)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=i.valueCallback?i.valueCallback(l):l,rest:n.slice(u.length)}}}function findKey(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function findIndex(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(e){return parseInt(e,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},locale={code:"en-US",formatDistance:formatDistance,formatLong:formatLong,formatRelative:formatRelative,localize:localize,match:match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function toInteger(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function addMilliseconds(e,t){requiredArgs(2,arguments);var r=toDate(e).getTime(),n=toInteger(t);return new Date(r+n)}function subMilliseconds(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addMilliseconds(e,-r)}function addLeadingZeros(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var formatters={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return addLeadingZeros("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):addLeadingZeros(r+1,2)},d:function(e,t){return addLeadingZeros(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return r.toUpperCase();case"aaaaa":return r[0];case"aaaa":default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return addLeadingZeros(e.getUTCHours()%12||12,t.length)},H:function(e,t){return addLeadingZeros(e.getUTCHours(),t.length)},m:function(e,t){return addLeadingZeros(e.getUTCMinutes(),t.length)},s:function(e,t){return addLeadingZeros(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getUTCMilliseconds();return addLeadingZeros(Math.floor(n*Math.pow(10,r-3)),t.length)}},MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),i=r-n;return Math.floor(i/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(e){requiredArgs(1,arguments);var t=1,r=toDate(e),n=r.getUTCDay(),i=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function getUTCISOWeekYear(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=startOfUTCISOWeek(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var o=startOfUTCISOWeek(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function startOfUTCISOWeekYear(e){requiredArgs(1,arguments);var t=getUTCISOWeekYear(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=startOfUTCISOWeek(r);return n}var MILLISECONDS_IN_WEEK=6048e5;function getUTCISOWeek(e){requiredArgs(1,arguments);var t=toDate(e),r=startOfUTCISOWeek(t).getTime()-startOfUTCISOWeekYear(t).getTime();return Math.round(r/MILLISECONDS_IN_WEEK)+1}function startOfUTCWeek(e,t){requiredArgs(1,arguments);var r=t||{},n=r.locale,i=n&&n.options&&n.options.weekStartsOn,a=null==i?0:toInteger(i),o=null==r.weekStartsOn?a:toInteger(r.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=toDate(e),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function getUTCWeekYear(e,t){requiredArgs(1,arguments);var r=toDate(e,t),n=r.getUTCFullYear(),i=t||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=null==o?1:toInteger(o),l=null==i.firstWeekContainsDate?s:toInteger(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(n+1,0,l),u.setUTCHours(0,0,0,0);var c=startOfUTCWeek(u,t),h=new Date(0);h.setUTCFullYear(n,0,l),h.setUTCHours(0,0,0,0);var d=startOfUTCWeek(h,t);return r.getTime()>=c.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function startOfUTCWeekYear(e,t){requiredArgs(1,arguments);var r=t||{},n=r.locale,i=n&&n.options&&n.options.firstWeekContainsDate,a=null==i?1:toInteger(i),o=null==r.firstWeekContainsDate?a:toInteger(r.firstWeekContainsDate),s=getUTCWeekYear(e,t),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=startOfUTCWeek(l,t);return u}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCWeek(e,t){requiredArgs(1,arguments);var r=toDate(e),n=startOfUTCWeek(r,t).getTime()-startOfUTCWeekYear(r,t).getTime();return Math.round(n/MILLISECONDS_IN_WEEK$1)+1}var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return formatters.y(e,t)},Y:function(e,t,r,n){var i=getUTCWeekYear(e,n),a=i>0?i:1-i;return"YY"===t?addLeadingZeros(a%100,2):"Yo"===t?r.ordinalNumber(a,{unit:"year"}):addLeadingZeros(a,t.length)},R:function(e,t){return addLeadingZeros(getUTCISOWeekYear(e),t.length)},u:function(e,t){return addLeadingZeros(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return addLeadingZeros(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return addLeadingZeros(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return formatters.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return addLeadingZeros(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var i=getUTCWeek(e,n);return"wo"===t?r.ordinalNumber(i,{unit:"week"}):addLeadingZeros(i,t.length)},I:function(e,t,r){var n=getUTCISOWeek(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):addLeadingZeros(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):formatters.d(e,t)},D:function(e,t,r){var n=getUTCDayOfYear(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):addLeadingZeros(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var i=e.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return addLeadingZeros(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var i=e.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return addLeadingZeros(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),i=0===n?7:n;switch(t){case"i":return String(i);case"ii":return addLeadingZeros(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,i=e.getUTCHours();switch(n=12===i?dayPeriodEnum.noon:0===i?dayPeriodEnum.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,i=e.getUTCHours();switch(n=i>=17?dayPeriodEnum.evening:i>=12?dayPeriodEnum.afternoon:i>=4?dayPeriodEnum.morning:dayPeriodEnum.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return formatters.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):formatters.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):formatters.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):formatters.s(e,t)},S:function(e,t){return formatters.S(e,t)},X:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return formatTimezoneWithOptionalMinutes(i);case"XXXX":case"XX":return formatTimezone(i);case"XXXXX":case"XXX":default:return formatTimezone(i,":")}},x:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return formatTimezoneWithOptionalMinutes(i);case"xxxx":case"xx":return formatTimezone(i);case"xxxxx":case"xxx":default:return formatTimezone(i,":")}},O:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(i,":");case"OOOO":default:return"GMT"+formatTimezone(i,":")}},z:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(i,":");case"zzzz":default:return"GMT"+formatTimezone(i,":")}},t:function(e,t,r,n){var i=n._originalDate||e;return addLeadingZeros(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,r,n){return addLeadingZeros((n._originalDate||e).getTime(),t.length)}};function formatTimezoneShort(e,t){var r=e>0?"-":"+",n=Math.abs(e),i=Math.floor(n/60),a=n%60;if(0===a)return r+String(i);var o=t||"";return r+String(i)+o+addLeadingZeros(a,2)}function formatTimezoneWithOptionalMinutes(e,t){return e%60==0?(e>0?"-":"+")+addLeadingZeros(Math.abs(e)/60,2):formatTimezone(e,t)}function formatTimezone(e,t){var r=t||"",n=e>0?"-":"+",i=Math.abs(e);return n+addLeadingZeros(Math.floor(i/60),2)+r+addLeadingZeros(i%60,2)}function dateLongFormatter(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function timeLongFormatter(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function dateTimeLongFormatter(e,t){var r,n=e.match(/(P+)(p+)?/),i=n[1],a=n[2];if(!a)return dateLongFormatter(e,t);switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",dateLongFormatter(i,t)).replace("{{time}}",timeLongFormatter(a,t))}var longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},MILLISECONDS_IN_MINUTE=6e4;function getDateMillisecondsPart(e){return e.getTime()%MILLISECONDS_IN_MINUTE}function getTimezoneOffsetInMilliseconds(e){var t=new Date(e.getTime()),r=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var n=r>0?(MILLISECONDS_IN_MINUTE+getDateMillisecondsPart(t))%MILLISECONDS_IN_MINUTE:getDateMillisecondsPart(t);return r*MILLISECONDS_IN_MINUTE+n}var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(e){return-1!==protectedDayOfYearTokens.indexOf(e)}function isProtectedWeekYearToken(e){return-1!==protectedWeekYearTokens.indexOf(e)}function throwProtectedError(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"))}var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(e,t,r){requiredArgs(2,arguments);var n=String(t),i=r||{},a=i.locale||locale,o=a.options&&a.options.firstWeekContainsDate,s=null==o?1:toInteger(o),l=null==i.firstWeekContainsDate?s:toInteger(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=null==u?0:toInteger(u),h=null==i.weekStartsOn?c:toInteger(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var d=toDate(e);if(!isValid(d))throw new RangeError("Invalid time value");var f=getTimezoneOffsetInMilliseconds(d),m=subMilliseconds(d,f),p={firstWeekContainsDate:l,weekStartsOn:h,locale:a,_originalDate:d},g=n.match(longFormattingTokensRegExp).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,longFormatters[t])(e,a.formatLong,p):e})).join("").match(formattingTokensRegExp).map((function(r){if("''"===r)return"'";var n=r[0];if("'"===n)return cleanEscapedString(r);var o=formatters$1[n];if(o)return!i.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(r)&&throwProtectedError(r,t,e),!i.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(r)&&throwProtectedError(r,t,e),o(m,r,a.localize,p);if(n.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return r})).join("");return g}function cleanEscapedString(e){return e.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function tzIntlTimeZoneName(e,t,r){var n=getDTF(e,r.timeZone,r.locale);return n.formatToParts?partsTimeZone(n,t):hackyTimeZone(n,t)}function partsTimeZone(e,t){var r=e.formatToParts(t);return r[r.length-1].value}function hackyTimeZone(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(r);return n?n[0].substr(1):""}function getDTF(e,t,r){if(r&&!r.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(r?[r.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function tzTokenizeDate(e,t){var r=getDateTimeFormat(t);return r.formatToParts?partsOffset(r,e):hackyOffset(r,e)}var typeToPos={year:0,month:1,day:2,hour:3,minute:4,second:5};function partsOffset(e,t){for(var r=e.formatToParts(t),n=[],i=0;i<r.length;i++){var a=typeToPos[r[i].type];a>=0&&(n[a]=parseInt(r[i].value,10))}return n}function hackyOffset(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var dtfCache={};function getDateTimeFormat(e){if(!dtfCache[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r="06/25/2014, 00:00:00"===t||"06/25/2014 00:00:00"===t;dtfCache[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dtfCache[e]}var MILLISECONDS_IN_HOUR=36e5,MILLISECONDS_IN_MINUTE$1=6e4,patterns={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/,timezoneIANA:/(UTC|(?:[a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?))$/};function tzParseTimezone(e,t){var r,n,i;if(r=patterns.timezoneZ.exec(e))return 0;if(r=patterns.timezoneHH.exec(e))return i=parseInt(r[2],10),validateTimezone()?(n=i*MILLISECONDS_IN_HOUR,"+"===r[1]?-n:n):NaN;if(r=patterns.timezoneHHMM.exec(e)){i=parseInt(r[2],10);var a=parseInt(r[3],10);return validateTimezone(i,a)?(n=i*MILLISECONDS_IN_HOUR+a*MILLISECONDS_IN_MINUTE$1,"+"===r[1]?-n:n):NaN}if(r=patterns.timezoneIANA.exec(e)){var o=tzTokenizeDate(t,e);return-(Date.UTC(o[0],o[1]-1,o[2],o[3],o[4],o[5])-(t.getTime()-t.getTime()%1e3))}return 0}function validateTimezone(e,t){return null==t||!(t<0||t>59)}var MILLISECONDS_IN_MINUTE$2=6e4,formatters$2={X:function(e,t,r,n){var i=n._originalDate||e,a=n.timeZone?tzParseTimezone(n.timeZone,i)/MILLISECONDS_IN_MINUTE$2:i.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return formatTimezoneWithOptionalMinutes$1(a);case"XXXX":case"XX":return formatTimezone$1(a);case"XXXXX":case"XXX":default:return formatTimezone$1(a,":")}},x:function(e,t,r,n){var i=n._originalDate||e,a=n.timeZone?tzParseTimezone(n.timeZone,i)/MILLISECONDS_IN_MINUTE$2:i.getTimezoneOffset();switch(t){case"x":return formatTimezoneWithOptionalMinutes$1(a);case"xxxx":case"xx":return formatTimezone$1(a);case"xxxxx":case"xxx":default:return formatTimezone$1(a,":")}},O:function(e,t,r,n){var i=n._originalDate||e,a=n.timeZone?tzParseTimezone(n.timeZone,i)/MILLISECONDS_IN_MINUTE$2:i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort$1(a,":");case"OOOO":default:return"GMT"+formatTimezone$1(a,":")}},z:function(e,t,r,n){var i=n._originalDate||e;switch(t){case"z":case"zz":case"zzz":return tzIntlTimeZoneName("short",i,n);case"zzzz":default:return tzIntlTimeZoneName("long",i,n)}}};function addLeadingZeros$1(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}function formatTimezone$1(e,t){var r=t||"",n=e>0?"-":"+",i=Math.abs(e);return n+addLeadingZeros$1(Math.floor(i/60),2)+r+addLeadingZeros$1(i%60,2)}function formatTimezoneWithOptionalMinutes$1(e,t){return e%60==0?(e>0?"-":"+")+addLeadingZeros$1(Math.abs(e)/60,2):formatTimezone$1(e,t)}function formatTimezoneShort$1(e,t){var r=e>0?"-":"+",n=Math.abs(e),i=Math.floor(n/60),a=n%60;if(0===a)return r+String(i);var o=t||"";return r+String(i)+o+addLeadingZeros$1(a,2)}var MILLISECONDS_IN_HOUR$1=36e5,MILLISECONDS_IN_MINUTE$3=6e4,DEFAULT_ADDITIONAL_DIGITS=2,patterns$1={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*| UTC|(?:[a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?))$/};function toDate$1(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var r=t||{},n=null==r.additionalDigits?DEFAULT_ADDITIONAL_DIGITS:toInteger(r.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=splitDateString(e),a=parseYear(i.date,n),o=a.year,s=a.restDateString,l=parseDate(s,o);if(isNaN(l))return new Date(NaN);if(l){var u,c=l.getTime(),h=0;if(i.time&&(h=parseTime(i.time),isNaN(h)))return new Date(NaN);if(i.timezone||r.timeZone){if(u=tzParseTimezone(i.timezone||r.timeZone,new Date(c+h)),isNaN(u))return new Date(NaN)}else u=getTimezoneOffsetInMilliseconds(new Date(c+h)),u=getTimezoneOffsetInMilliseconds(new Date(c+h+u));return new Date(c+h+u)}return new Date(NaN)}function splitDateString(e){var t,r={},n=e.split(patterns$1.dateTimeDelimeter);if(patterns$1.plainTime.test(n[0])?(r.date=null,t=n[0]):(r.date=n[0],t=n[1],r.timezone=n[2],patterns$1.timeZoneDelimeter.test(r.date)&&(r.date=e.split(patterns$1.timeZoneDelimeter)[0],t=e.substr(r.date.length,e.length))),t){var i=patterns$1.timezone.exec(t);i?(r.time=t.replace(i[1],""),r.timezone=i[1]):r.time=t}return r}function parseYear(e,t){var r,n=patterns$1.YYY[t],i=patterns$1.YYYYY[t];if(r=patterns$1.YYYY.exec(e)||i.exec(e)){var a=r[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(r=patterns$1.YY.exec(e)||n.exec(e)){var o=r[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}function parseDate(e,t){if(null===t)return null;var r,n,i,a;if(0===e.length)return(n=new Date(0)).setUTCFullYear(t),n;if(r=patterns$1.MM.exec(e))return n=new Date(0),validateDate(t,i=parseInt(r[1],10)-1)?(n.setUTCFullYear(t,i),n):new Date(NaN);if(r=patterns$1.DDD.exec(e)){n=new Date(0);var o=parseInt(r[1],10);return validateDayOfYearDate(t,o)?(n.setUTCFullYear(t,0,o),n):new Date(NaN)}if(r=patterns$1.MMDD.exec(e)){n=new Date(0),i=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return validateDate(t,i,s)?(n.setUTCFullYear(t,i,s),n):new Date(NaN)}if(r=patterns$1.Www.exec(e))return validateWeekDate(t,a=parseInt(r[1],10)-1)?dayOfISOWeekYear(t,a):new Date(NaN);if(r=patterns$1.WwwD.exec(e)){a=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return validateWeekDate(t,a,l)?dayOfISOWeekYear(t,a,l):new Date(NaN)}return null}function parseTime(e){var t,r,n;if(t=patterns$1.HH.exec(e))return validateTime(r=parseFloat(t[1].replace(",",".")))?r%24*MILLISECONDS_IN_HOUR$1:NaN;if(t=patterns$1.HHMM.exec(e))return validateTime(r=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")))?r%24*MILLISECONDS_IN_HOUR$1+n*MILLISECONDS_IN_MINUTE$3:NaN;if(t=patterns$1.HHMMSS.exec(e)){r=parseInt(t[1],10),n=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return validateTime(r,n,i)?r%24*MILLISECONDS_IN_HOUR$1+n*MILLISECONDS_IN_MINUTE$3+1e3*i:NaN}return null}function dayOfISOWeekYear(e,t,r){t=t||0,r=r||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var i=7*t+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+i),n}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(e){return e%400==0||e%4==0&&e%100!=0}function validateDate(e,t,r){if(t<0||t>11)return!1;if(null!=r){if(r<1)return!1;var n=isLeapYearIndex(e);if(n&&r>DAYS_IN_MONTH_LEAP_YEAR[t])return!1;if(!n&&r>DAYS_IN_MONTH[t])return!1}return!0}function validateDayOfYearDate(e,t){if(t<1)return!1;var r=isLeapYearIndex(e);return!(r&&t>366)&&!(!r&&t>365)}function validateWeekDate(e,t,r){return!(t<0||t>52)&&(null==r||!(r<0||r>6))}function validateTime(e,t,r){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==r||!(r<0||r>=60)))}var tzFormattingTokensRegExp=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function format$1(e,t,r){var n=String(t),i=r||{},a=n.match(tzFormattingTokensRegExp);if(a){var o=toDate$1(e,i);n=a.reduce((function(e,t){return"'"===t[0]?e:e.replace(t,"'"+formatters$2[t[0]](o,t,null,i)+"'")}),n)}return format(e,n,i)}function utcToZonedTime(e,t,r){var n=toDate$1(e,r),i=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),a=tzParseTimezone(t,n);return a?subMilliseconds(i,a):i}var DATE_FORMAT_PATTERN="d.M HH:mm",Clock=function(){var e=function(){return new Date},t=e(),r=null;return{view:function(e){var r=e.attrs;return mithril("".concat(CSS.folderCard,".flex.justify-between"),[mithril("span",r.timezone.split("/")[1]),mithril("span",format$1(utcToZonedTime(t,r.timezone),DATE_FORMAT_PATTERN))])},oncreate:function(){r=setInterval((function(){t=e(),mithril.redraw()}),5*SECOND)},onremove:function(){return clearInterval(r)}}},ClockFolder={view:function(e){var t=e.attrs;return mithril(CSS.folder,[mithril(CSS.iconClock),mithril(CSS.folderCardsWrapper,{style:{minHeight:"120px"}},t.timezones&&t.timezones.map((function(e){return mithril(Clock,{timezone:e})})))])}},App=function(){Boards.init();var e=!1,t=null,r=!1,n=null;return{view:function(){var i=Boards.getActiveBoard(),a=Boards.getActiveBoardFolders(),o=Boards.getNavigationData();return mithril(CSS.appContainer,[mithril(CSS.navigationWrapper,[mithril(".mr3","Boards: ")].concat(_toConsumableArray(o.map((function(e){return e.title?mithril(".pointer.mr4".concat(e.id===Boards.active?".underline":""),{onclick:function(){return Boards.setActive(e.id)}},e.title):mithril(CSS.navigationTitleInputField,{oncreate:function(e){e.dom.focus()},value:n,maxlength:30,oninput:function(e){n=e.target.value},onfocusout:function(){n=null,r=!1,Boards.removeBoard(e.id)},onkeydown:function(t){return"Enter"===t.key?(t.preventDefault(),r=!1,n?(Boards.updateBoardTitle(n,e.id),n=null,void Boards.setActive(e.id)):void Boards.removeBoard(e.id)):"Escape"===t.key?(r=!1,n=null,void Boards.removeBoard(e.id)):void 0}})}))),[!r&&mithril(".new-board-button-wrapper.pointer",{onclick:function(){Boards.createBoard(),r=!0}},mithril("".concat(CSS.iconPlus,".icon-plus--small"))),mithril(CSS.uploadConfigContainer,[mithril(CSS.selectFileButton,{onchange:readConfigFile(Boards.loadFromConfig)}),mithril(CSS.selectFileLabel,"load config")])])),i?[mithril(CSS.header,[e?mithril(CSS.boardTitleInputField,{oncreate:function(e){return e.dom.focus()},value:t,maxlength:30,oninput:function(e){return t=e.target.value},onfocusout:function(){e=!1,t=null},onkeydown:function(r){if("Enter"===r.key&&(e=!1,t))return Boards.updateBoardTitle(t),void(t=null);"Escape"===r.key&&(e=!1,t=null)}}):mithril(CSS.boardTitle,{ondblclick:function(){e=!0,t=i.title}},i.title),mithril(".pointer",{onclick:function(){return Boards.removeBoard(i.id)}},"delete")]),mithril(CSS.foldersContainer,[].concat(_toConsumableArray(a.map((function(e){return mithril(Folder,_objectSpread2(_objectSpread2({},e),{},{boardId:i.id}))}))),[mithril(FolderPlaceholder,{boardId:i.id}),i.rss_url?mithril(Rss,{url:i.rss_url}):null,i.timezones&&i.timezones.length?mithril(ClockFolder,{timezones:i.timezones}):null]))]:null])},oncreate:function(){feather.replace()},onupdate:function(){feather.replace()}}};document.addEventListener("keydown",(function(e){e.ctrlKey&&"z"===e.key?(Boards.undo(),mithril.redraw()):e.ctrlKey&&"y"===e.key&&(Boards.redo(),mithril.redraw())}));var mountNode=document.querySelector("#app");mithril.mount(mountNode,App)}));
//# sourceMappingURL=bundle.js.map
